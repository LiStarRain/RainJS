<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 默认 then 返回的Promise对象状态是fulfilled
    // const promise = new Promise((resolve, reject) => {
    //   resolve('success');
    // }).then(res => {
    //   console.log(res);
    //   return '哈哈';
    // }).then(msg => {
    //   console.log(msg); // 哈哈
    // });
    // setTimeout(() => {
    //   console.log(promise); // Promise {<fulfilled>: "undefined"}
    // });

    // 每一次调用then方法返回的都是全新的fulfilled状态的Promise对象
    // let p1 = new Promise((resolve, reject) => {
    //   resolve('success');
    // });
    // let p2 = p1.then(() => {
    //   console.log('fulfilled');
    // });
    // p2.then(() => {
    //   console.log('fulfilled too');
    // });
    // console.log(p1); // Promise {<fulfilled>: "success"}
    // console.log(p2); // Promise {<pending>}
    // 推进宏任务队列  
    // setTimeout(() => {
    //   console.log(p1); // Promise {<fulfilled>: "success"}
    //   console.log(p2); // Promise {<fulfilled>: undefined}
    // });

    // then方法是对上一个Promise对象结果的处理
    // new Promise((resolve, reject) => {
    //   reject('rejected');
    // }).then(null, error => {
    //   console.log(error); // rejected
    // }).then(() => {
    //   console.log('success'); // success
    //   throw new Error('哈哈');
    // }).then(null, error => {
    //   console.log(error.message); // 哈哈
    // });

    // 自定义then方法的返回值
    // let p1 = new Promise((resolve, reject) => {
    //   resolve('success');
    // });
    // let p2 = p1.then(() => {
    //   return new Promise((resolve, reject) => {
    //     resolve('ame');
    //   });
    // });
    // p2.then(msg => {
    //   console.log(msg); // ame
    // });

    // 后一个then是对前一个promise对象结果的处理
    // new Promise((resolve, reject) => {
    //   resolve('第一个promise');
    // }).then(value => {
    //   console.log(value); // 第一个promise
    //   return new Promise((resolve, reject) => {
    //     resolve('第二个promise');
    //   }).then(res => {
    //     console.log(res); // 第二个promise
    //     return '第三个promise';
    //   });
    // }).then(res => {
    //   console.log(res); // 第三个promise
    // });
    // 优化后
    new Promise((resolve, reject) => {
      resolve('第一个promise');
    }).then(value => {
      console.log(value); // 第一个promise
      return new Promise((resolve, reject) => {
        resolve('第二个promise');
      });
    }).then(res => {
      console.log(res); // 第二个promise
      return '第三个promise';
    }).then(res => {
      console.log(res); // 第三个promise
    });
  </script>
</body>

</html>